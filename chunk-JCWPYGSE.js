import{a}from"./chunk-SPLEEHVV.js";import{a as h}from"./chunk-EPQI4F3N.js";import{ca as p,m as c,na as d}from"./chunk-Y7QBYHK6.js";var s=class extends Error{};s.prototype.name="InvalidTokenError";function u(r){return decodeURIComponent(atob(r).replace(/(.)/g,(e,o)=>{let t=o.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}function f(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return u(e)}catch{return atob(e)}}function l(r,e){if(typeof r!="string")throw new s("Invalid token specified: must be a string");e||(e={});let o=e.header===!0?0:1,t=r.split(".")[o];if(typeof t!="string")throw new s(`Invalid token specified: missing part #${o+1}`);let n;try{n=f(t)}catch(i){throw new s(`Invalid token specified: invalid base64 for part #${o+1} (${i.message})`)}try{return JSON.parse(n)}catch(i){throw new s(`Invalid token specified: invalid json for part #${o+1} (${i.message})`)}}var y=(()=>{let e=class e{saveUserData(){let t=JSON.stringify(localStorage.getItem("token")),n=l(t);this.userData.next(n)}constructor(){this._http=d(h),this.userData=new c(null)}Register(t){return this._http.post(`${a}/auth/register`,t)}LogIn(t){return this._http.post(`${a}/auth/sign-in`,t)}ResetPassword(t){return this._http.post(`${a}/auth/reset-password`,t)}ForgetPassword(t){return this._http.post(`${a}/auth/forget-password`,t)}ChangePassword(t){return this._http.post(`${a}/auth/change-password`,t)}ngOnInit(){localStorage.getItem("token")!=null&&this.saveUserData()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();export{y as a};
